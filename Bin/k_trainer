#!/usr/bin/env node
var path = require('path'),
    fs = require('fs'),
    Ftps = require('../Src/Ftps'),
    Shell = require('../Src/Shell'),
    param_path = process.argv[2],
    file_path,
    options;



if ( !param_path ) {
    console.error('need path in process');
    return ;
}

file_path = path.isAbsolute( param_path ) ? path.normalize( param_path ) : path.join( process.cwd(), process.argv[2]) ;

if ( !fs.existsSync( file_path ) ) {
    console.error(file_path+' not exists');
    return;
}
options = require(file_path);

if ( !(options instanceof Array) ) {
    console.error(options+' is not array ');
    return;
}

options.forEach(function(element) {
    if (element.real === false) return;
    switch(element.type){
        case 'ftp':
            new Ftps(element);
            break;
        case 'shell':
            new Shell(element);
            break;
        default:
            break;
    }
})